// Refs - emphasizes that all arguments are passed by reference
//    actually maybe Integer, Real and Boolean will be passed by the value for optimization.
//    but keep in mind that these classes have no mutation methods and cannot be inherited, so that for both program behaviour and semantics it does not matter whether they are passed by value or by the reference

class SomeClass is
    var ismarked : Boolean := false

    method mark() : void is
        this.ismarked := true
    end
end

class Refs extends EntryPoint is
    method assert(cond : Boolean) : void is
        if cond.not() then
            this.exit_code := 1
        end
    end

    method doSmth(a : SomeClass) : void is
        a.mark()
        this.assert(a.ismarked) // here a.ismarked = true

        a := SomeClass()
        // here a.ismarked = false
        var a_mark : Boolean := a.ismarked
        this.assert(a_mark.not())
    end

    this(stdin: StdIn, stdout: StdOut, stderr: StdOut, args: Array[Array[Integer]]) is
        var a : SomeClass := SomeClass()

        // here a.ismarked = false
        var a_mark : Boolean := a.ismarked
        this.assert(a_mark.not())

        this.doSmth(a)

        this.assert(a_mark.not()) // a_mark is still referencing the same object that was not changed
        this.assert(a.ismarked) // here a.ismarked = true
    end
end
